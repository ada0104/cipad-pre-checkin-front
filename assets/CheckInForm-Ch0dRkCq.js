import{_ as be,c as E,k as I,z as Be,d as Me,x as _e,v as _,f as s,s as oe,e as j,t as x,A as et,w as Q,h as he,B as tt,r as C,C as at,y as M,D as ge,E as we,l as nt,g as i,G as Pe,H as Ee,I as rt,J as ot,K as $e,b as st,u as it,o as lt,i as S,m as Oe,F as Te,n as ut,L as A,M as G,p as D,N as Se,O as ct,P as dt,j as vt}from"./index-C1EeuRVQ.js";import{B as se,H as pt,s as ft}from"./Button-DZxHFyMh.js";import{u as mt,_ as ht,E as gt,a as Z}from"./useErrorHandling-Bpx-LALl.js";import{u as $t}from"./member-6y7xb5HH.js";const yt={},bt={class:"content"};function _t(e,n){return I(),E("div",bt,n[0]||(n[0]=[Be("<h2 data-v-83d08442>1. 資料收集範圍</h2><p data-v-83d08442>在您使用CIPAD-GUEST的預先登記入住線上服務時，我們可能會根據服務需求收集以下類型的個人資料：</p><ul data-v-83d08442><li data-v-83d08442><strong data-v-83d08442>基本身份資訊</strong>：如姓名、性別、出生日期、國籍、身分證明文件（例如護照、身分證）。</li><li data-v-83d08442><strong data-v-83d08442>聯絡資訊</strong>：包括您的電子郵件地址、電話號碼等。</li><li data-v-83d08442><strong data-v-83d08442>預訂與入住資訊</strong>：包括您的預訂號碼、入住及退房日期、房型及特殊需求。</li><li data-v-83d08442><strong data-v-83d08442>偏好</strong>：包括您過往的入住記錄。</li><li data-v-83d08442><strong data-v-83d08442>其他個人資訊</strong>：您在使用 Precheckin 服務時主動提供的其他信息。</li></ul><h2 data-v-83d08442>2. 資料的使用</h2><p data-v-83d08442>我們收集的個人資料將用於以下目的：</p><ul data-v-83d08442><li data-v-83d08442><strong data-v-83d08442>快速入住服務</strong>：在您抵達飯店前，透過提前提供資料完成入住手續，縮短辦理入住的時間。</li><li data-v-83d08442><strong data-v-83d08442>身分驗證</strong>：根據當地法律要求或飯店政策，在您入住前或入住時驗證您的身分。</li><li data-v-83d08442><strong data-v-83d08442>提供個性化服務</strong>：根據您提供的偏好資料，為您定製個性化的入住體驗，例如特殊需求處理。</li><li data-v-83d08442><strong data-v-83d08442>行銷與促銷活動</strong>：在您同意的情況下，使用您的聯絡資料向您推廣我們的促銷活動、優惠方案或訂閱我們的電子報。</li><li data-v-83d08442><strong data-v-83d08442>法定要求</strong>：在符合相關法律、法規或政府機關要求的情況下，分享或提供您的個人資料。</li></ul><h2 data-v-83d08442>3. 資料的分享與轉讓</h2><p data-v-83d08442>在某些情況下，我們可能會將您的個人資料與以下第三方共享：</p><ul data-v-83d08442><li data-v-83d08442><strong data-v-83d08442>技術服務提供者</strong>：為了提供預先登記入住服務，我們可能會與技術供應商共享您的資料，這些供應商會幫助我們進行資料處理、數據存儲、網絡安全等。</li><li data-v-83d08442><strong data-v-83d08442>付款處理機構</strong>：在需要提前支付的情況下，我們會將支付信息傳遞給我們的支付處理合作夥伴，以便完成交易。</li><li data-v-83d08442><strong data-v-83d08442>飯店集團內部</strong>：您的個人資料可能會在我們的飯店集團內部共享，用於提升服務品質，滿足您的跨飯店需求（如您入住同一集團下的其他飯店時）。</li></ul><p data-v-83d08442>我們不會將您的個人資料出售給第三方，也不會在未經您同意的情況下向任何第三方披露您的個人資料。</p><h2 data-v-83d08442>4. 資料的保存與保護</h2><p data-v-83d08442>我們將採取適當的技術手段及組織性措施來保護您的個人資料，防止其遭到未經授權的存取、遺失、誤用或篡改。這些措施包括但不限於：</p><ul data-v-83d08442><li data-v-83d08442><strong data-v-83d08442>數據加密</strong>：您的敏感資料（例如支付信息）在傳輸過程中會使用加密技術保護。</li><li data-v-83d08442><strong data-v-83d08442>權限控制</strong>：只有經過授權的工作人員才能夠訪問您的個人資料，並且這些工作人員會受到嚴格的保密協議約束。</li></ul><h2 data-v-83d08442>5. 您的權利</h2><p data-v-83d08442>您有權根據當地隱私法行使以下權利：</p><ul data-v-83d08442><li data-v-83d08442><strong data-v-83d08442>查閱權</strong>：要求我們提供我們持有的您的個人資料副本。</li><li data-v-83d08442><strong data-v-83d08442>更正權</strong>：要求我們更正任何不正確或不完整的資料。</li><li data-v-83d08442><strong data-v-83d08442>刪除權</strong>：在法律允許的情況下，您可以要求我們刪除您的個人資料。</li></ul><h2 data-v-83d08442>6. 聯絡我們</h2><p data-v-83d08442>如果您對本隱私權條款有任何疑問、建議，或希望行使您的隱私權，請通過以下方式聯繫我們：</p><p data-v-83d08442><strong data-v-83d08442>電子郵件：</strong>reservation.service@dunqian.com</p><h2 data-v-83d08442>7. 隱私權條款的變更</h2><p data-v-83d08442>我們保留隨時更新或修改本隱私權條款的權利。當我們對條款進行重大修改時，我們將通過電子郵件或飯店網站的公告通知您。建議您定期查看我們的隱私政策，以確保您瞭解最新的條款變更。</p>",21)]))}const wt=be(yt,[["render",_t],["__scopeId","data-v-83d08442"]]),Ct={},kt={class:"content"};function xt(e,n){return I(),E("div",kt,n[0]||(n[0]=[Be("<h2 data-v-8db12f1c>1. Scope of Data Collection</h2><p data-v-8db12f1c> When using the CIPAD-GUEST online pre-check-in service, we may collect the following types of personal information based on service requirements: </p><ul data-v-8db12f1c><li data-v-8db12f1c><strong data-v-8db12f1c>Basic Identity Information</strong>: such as your name, gender, date of birth, nationality, and identification documents (e.g., passport, ID card). </li><li data-v-8db12f1c><strong data-v-8db12f1c>Contact Information</strong>: including your email address, phone number, etc.</li><li data-v-8db12f1c><strong data-v-8db12f1c>Booking and Check-in Information</strong>: including your booking number, check-in and check-out dates, room type, and special requests. </li><li data-v-8db12f1c><strong data-v-8db12f1c>Preferences</strong>: including your previous stay records.</li><li data-v-8db12f1c><strong data-v-8db12f1c>Other Personal Information</strong>: any other information you actively provide when using the pre-check-in service. </li></ul><h2 data-v-8db12f1c>2. Use of Data</h2><p data-v-8db12f1c>The personal information we collect will be used for the following purposes:</p><ul data-v-8db12f1c><li data-v-8db12f1c><strong data-v-8db12f1c>Quick Check-in Service</strong>: Completing check-in procedures by providing information in advance to shorten the time required for check-in upon arrival. </li><li data-v-8db12f1c><strong data-v-8db12f1c>Identity Verification</strong>: Verifying your identity before or upon check-in as required by local laws or hotel policies. </li><li data-v-8db12f1c><strong data-v-8db12f1c>Providing Personalized Services</strong>: Customizing your check-in experience based on your provided preferences, such as handling special requests. </li><li data-v-8db12f1c><strong data-v-8db12f1c>Marketing and Promotional Activities</strong>: With your consent, using your contact information to promote our special offers, discount plans, or newsletters. </li><li data-v-8db12f1c><strong data-v-8db12f1c>Legal Requirements</strong>: Sharing or providing your personal information in compliance with relevant laws, regulations, or government authority requests. </li></ul><h2 data-v-8db12f1c>3. Data Sharing and Transfer</h2><p data-v-8db12f1c>In certain cases, we may share your personal information with the following third parties:</p><ul data-v-8db12f1c><li data-v-8db12f1c><strong data-v-8db12f1c>Technical Service Providers</strong>: To provide the pre-check-in service, we may share your information with technical providers who assist us with data processing, storage, network security, etc. </li><li data-v-8db12f1c><strong data-v-8db12f1c>Payment Processing Agencies</strong>: In cases requiring prepayment, we will pass on payment information to our payment processing partners to complete transactions. </li><li data-v-8db12f1c><strong data-v-8db12f1c>Within Hotel Group</strong>: Your personal information may be shared within our hotel group to improve service quality and fulfill your needs across our hotels (e.g., if you stay at another hotel within the same group). </li></ul><p data-v-8db12f1c> We will not sell your personal information to third parties, nor will we disclose your personal information to any third parties without your consent. </p><h2 data-v-8db12f1c>4. Data Retention and Protection</h2><p data-v-8db12f1c> We will take appropriate technical and organizational measures to protect your personal information from unauthorized access, loss, misuse, or alteration. These measures include but are not limited to: </p><ul data-v-8db12f1c><li data-v-8db12f1c><strong data-v-8db12f1c>Data Encryption</strong>: Sensitive information (e.g., payment details) is protected with encryption during transmission. </li><li data-v-8db12f1c><strong data-v-8db12f1c>Access Control</strong>: Only authorized personnel have access to your personal information, and they are bound by strict confidentiality agreements. </li></ul><h2 data-v-8db12f1c>5. Your Rights</h2><p data-v-8db12f1c>You have the following rights under local privacy laws:</p><ul data-v-8db12f1c><li data-v-8db12f1c><strong data-v-8db12f1c>Right to Access</strong>: Request a copy of the personal information we hold about you.</li><li data-v-8db12f1c><strong data-v-8db12f1c>Right to Correction</strong>: Request correction of any inaccurate or incomplete information.</li><li data-v-8db12f1c><strong data-v-8db12f1c>Right to Deletion</strong>: Request the deletion of your personal information where permitted by law. </li></ul><h2 data-v-8db12f1c>6. Contact Us</h2><p data-v-8db12f1c> If you have any questions or suggestions about this privacy policy, or wish to exercise your privacy rights, please contact us: </p><p data-v-8db12f1c><strong data-v-8db12f1c>Email:</strong> reservation.service@dunqian.com</p><h2 data-v-8db12f1c>7. Changes to the Privacy Policy</h2><p data-v-8db12f1c> We reserve the right to update or modify this privacy policy at any time. When we make significant changes to the policy, we will notify you via email or through a notice on the hotel website. We recommend that you regularly review our privacy policy to ensure you understand the latest terms. </p>",21)]))}const Rt=be(Ct,[["render",xt],["__scopeId","data-v-8db12f1c"]]),It={class:"card"},Pt={class:"card-title"},Et=Me({__name:"PrivacyPolicy",setup(e){const{locale:n}=_e(),a=_(()=>n.value==="zh"?wt:Rt);return(t,o)=>(I(),E("div",It,[s("div",Pt,x(t.$t("privacyPolicy")),1),(I(),oe(et(a.value))),j(se,{buttonClass:"btn primary-btn",onClick:o[0]||(o[0]=u=>t.$emit("close"))},{default:Q(()=>[he(x(t.$t("close")),1)]),_:1})]))}}),Ot=be(Et,[["__scopeId","data-v-5c88b8b1"]]);function Ne(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,t)}return a}function B(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Ne(Object(a),!0).forEach(function(t){Tt(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Tt(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function Ve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((a,t)=>(n.includes(t)||(a[t]=i(e[t])),a),{})}function le(e){return typeof e=="function"}function St(e){return rt(e)||ot(e)}function Ue(e,n,a){let t=e;const o=n.split(".");for(let u=0;u<o.length;u++){if(!t[o[u]])return a;t=t[o[u]]}return t}function me(e,n,a){return _(()=>e.some(t=>Ue(n,t,{[a]:!1})[a]))}function De(e,n,a){return _(()=>e.reduce((t,o)=>{const u=Ue(n,o,{[a]:!1})[a]||[];return t.concat(u)},[]))}function We(e,n,a,t){return e.call(t,i(n),i(a),t)}function Fe(e){return e.$valid!==void 0?!e.$valid:!e}function Nt(e,n,a,t,o,u,p){let{$lazy:c,$rewardEarly:l}=o,d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],m=arguments.length>8?arguments[8]:void 0,v=arguments.length>9?arguments[9]:void 0,b=arguments.length>10?arguments[10]:void 0;const y=C(!!t.value),r=C(0);a.value=!1;const h=M([n,t].concat(d,b),()=>{if(c&&!t.value||l&&!v.value&&!a.value)return;let f;try{f=We(e,n,m,p)}catch(w){f=Promise.reject(w)}r.value++,a.value=!!r.value,y.value=!1,Promise.resolve(f).then(w=>{r.value--,a.value=!!r.value,u.value=w,y.value=Fe(w)}).catch(w=>{r.value--,a.value=!!r.value,u.value=w,y.value=!0})},{immediate:!0,deep:typeof n=="object"});return{$invalid:y,$unwatch:h}}function Vt(e,n,a,t,o,u,p,c){let{$lazy:l,$rewardEarly:d}=t;const m=()=>({}),v=_(()=>{if(l&&!a.value||d&&!c.value)return!1;let b=!0;try{const y=We(e,n,p,u);o.value=y,b=Fe(y)}catch(y){o.value=y}return b});return{$unwatch:m,$invalid:v}}function Dt(e,n,a,t,o,u,p,c,l,d,m){const v=C(!1),b=e.$params||{},y=C(null);let r,h;e.$async?{$invalid:r,$unwatch:h}=Nt(e.$validator,n,v,a,t,y,o,e.$watchTargets,l,d,m):{$invalid:r,$unwatch:h}=Vt(e.$validator,n,a,t,y,o,l,d);const f=e.$message;return{$message:le(f)?_(()=>f(Ve({$pending:v,$invalid:r,$params:Ve(b),$model:n,$response:y,$validator:u,$propertyPath:c,$property:p}))):f||"",$params:b,$pending:v,$invalid:r,$response:y,$unwatch:h}}function Lt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=i(e),a=Object.keys(n),t={},o={},u={};let p=null;return a.forEach(c=>{const l=n[c];switch(!0){case le(l.$validator):t[c]=l;break;case le(l):t[c]={$validator:l};break;case c==="$validationGroups":p=l;break;case c.startsWith("$"):u[c]=l;break;default:o[c]=l}}),{rules:t,nestedValidators:o,config:u,validationGroups:p}}const At="__root";function jt(e,n,a,t,o,u,p,c,l){const d=Object.keys(e),m=t.get(o,e),v=C(!1),b=C(!1),y=C(0);if(m){if(!m.$partial)return m;m.$unwatch(),v.value=m.$dirty.value}const r={$dirty:v,$path:o,$touch:()=>{v.value||(v.value=!0)},$reset:()=>{v.value&&(v.value=!1)},$commit:()=>{}};return d.length?(d.forEach(h=>{r[h]=Dt(e[h],n,r.$dirty,u,p,h,a,o,l,b,y)}),r.$externalResults=_(()=>c.value?[].concat(c.value).map((h,f)=>({$propertyPath:o,$property:a,$validator:"$externalResults",$uid:`${o}-externalResult-${f}`,$message:h,$params:{},$response:null,$pending:!1})):[]),r.$invalid=_(()=>{const h=d.some(f=>i(r[f].$invalid));return b.value=h,!!r.$externalResults.value.length||h}),r.$pending=_(()=>d.some(h=>i(r[h].$pending))),r.$error=_(()=>r.$dirty.value?r.$pending.value||r.$invalid.value:!1),r.$silentErrors=_(()=>d.filter(h=>i(r[h].$invalid)).map(h=>{const f=r[h];return we({$propertyPath:o,$property:a,$validator:h,$uid:`${o}-${h}`,$message:f.$message,$params:f.$params,$response:f.$response,$pending:f.$pending})}).concat(r.$externalResults.value)),r.$errors=_(()=>r.$dirty.value?r.$silentErrors.value:[]),r.$unwatch=()=>d.forEach(h=>{r[h].$unwatch()}),r.$commit=()=>{b.value=!0,y.value=Date.now()},t.set(o,e,r),r):(m&&t.set(o,e,r),r)}function qt(e,n,a,t,o,u,p){const c=Object.keys(e);return c.length?c.reduce((l,d)=>(l[d]=ye({validations:e[d],state:n,key:d,parentKey:a,resultsCache:t,globalConfig:o,instance:u,externalResults:p}),l),{}):{}}function zt(e,n,a){const t=_(()=>[n,a].filter(r=>r).reduce((r,h)=>r.concat(Object.values(i(h))),[])),o=_({get(){return e.$dirty.value||(t.value.length?t.value.every(r=>r.$dirty):!1)},set(r){e.$dirty.value=r}}),u=_(()=>{const r=i(e.$silentErrors)||[],h=t.value.filter(f=>(i(f).$silentErrors||[]).length).reduce((f,w)=>f.concat(...w.$silentErrors),[]);return r.concat(h)}),p=_(()=>{const r=i(e.$errors)||[],h=t.value.filter(f=>(i(f).$errors||[]).length).reduce((f,w)=>f.concat(...w.$errors),[]);return r.concat(h)}),c=_(()=>t.value.some(r=>r.$invalid)||i(e.$invalid)||!1),l=_(()=>t.value.some(r=>i(r.$pending))||i(e.$pending)||!1),d=_(()=>t.value.some(r=>r.$dirty)||t.value.some(r=>r.$anyDirty)||o.value),m=_(()=>o.value?l.value||c.value:!1),v=()=>{e.$touch(),t.value.forEach(r=>{r.$touch()})},b=()=>{e.$commit(),t.value.forEach(r=>{r.$commit()})},y=()=>{e.$reset(),t.value.forEach(r=>{r.$reset()})};return t.value.length&&t.value.every(r=>r.$dirty)&&v(),{$dirty:o,$errors:p,$invalid:c,$anyDirty:d,$error:m,$pending:l,$touch:v,$reset:y,$silentErrors:u,$commit:b}}function ye(e){let{validations:n,state:a,key:t,parentKey:o,childResults:u,resultsCache:p,globalConfig:c={},instance:l,externalResults:d}=e;const m=o?`${o}.${t}`:t,{rules:v,nestedValidators:b,config:y,validationGroups:r}=Lt(n),h=B(B({},c),y),f=t?_(()=>{const R=i(a);return R?i(R[t]):void 0}):a,w=B({},i(d)||{}),q=_(()=>{const R=i(d);return t?R?i(R[t]):void 0:R}),U=jt(v,f,t,p,m,h,l,q,a),O=qt(b,f,m,p,h,l,q),te={};r&&Object.entries(r).forEach(R=>{let[L,V]=R;te[L]={$invalid:me(V,O,"$invalid"),$error:me(V,O,"$error"),$pending:me(V,O,"$pending"),$errors:De(V,O,"$errors"),$silentErrors:De(V,O,"$silentErrors")}});const{$dirty:P,$errors:ce,$invalid:N,$anyDirty:ae,$error:Y,$pending:W,$touch:J,$reset:de,$silentErrors:ve,$commit:ne}=zt(U,O,u),re=t?_({get:()=>i(f),set:R=>{P.value=!0;const L=i(a),V=i(d);V&&(V[t]=w[t]),ge(L[t])?L[t].value=R:L[t]=R}}):null;t&&h.$autoDirty&&M(f,()=>{P.value||J();const R=i(d);R&&(R[t]=w[t])},{flush:"sync"});async function pe(){return J(),h.$rewardEarly&&(ne(),await $e()),await $e(),new Promise(R=>{if(!W.value)return R(!N.value);const L=M(W,()=>{R(!N.value),L()})})}function fe(R){return(u.value||{})[R]}function K(){ge(d)?d.value=w:Object.keys(w).length===0?Object.keys(d).forEach(R=>{delete d[R]}):Object.assign(d,w)}return we(B(B(B({},U),{},{$model:re,$dirty:P,$error:Y,$errors:ce,$invalid:N,$anyDirty:ae,$pending:W,$touch:J,$reset:de,$path:m||At,$silentErrors:ve,$validate:pe,$commit:ne},u&&{$getResultsForChild:fe,$clearExternalResults:K,$validationGroups:te}),O))}class Bt{constructor(){this.storage=new Map}set(n,a,t){this.storage.set(n,{rules:a,result:t})}checkRulesValidity(n,a,t){const o=Object.keys(t),u=Object.keys(a);return u.length!==o.length||!u.every(c=>o.includes(c))?!1:u.every(c=>a[c].$params?Object.keys(a[c].$params).every(l=>i(t[c].$params[l])===i(a[c].$params[l])):!0)}get(n,a){const t=this.storage.get(n);if(!t)return;const{rules:o,result:u}=t,p=this.checkRulesValidity(n,a,o),c=u.$unwatch?u.$unwatch:()=>({});return p?u:{$dirty:u.$dirty,$partial:!0,$unwatch:c}}}const ie={COLLECT_ALL:!0,COLLECT_NONE:!1},Le=Symbol("vuelidate#injectChildResults"),Ae=Symbol("vuelidate#removeChildResults");function Mt(e){let{$scope:n,instance:a}=e;const t={},o=C([]),u=_(()=>o.value.reduce((m,v)=>(m[v]=i(t[v]),m),{}));function p(m,v){let{$registerAs:b,$scope:y,$stopPropagation:r}=v;r||n===ie.COLLECT_NONE||y===ie.COLLECT_NONE||n!==ie.COLLECT_ALL&&n!==y||(t[b]=m,o.value.push(b))}a.__vuelidateInjectInstances=[].concat(a.__vuelidateInjectInstances||[],p);function c(m){o.value=o.value.filter(v=>v!==m),delete t[m]}a.__vuelidateRemoveInstances=[].concat(a.__vuelidateRemoveInstances||[],c);const l=Pe(Le,[]);Ee(Le,a.__vuelidateInjectInstances);const d=Pe(Ae,[]);return Ee(Ae,a.__vuelidateRemoveInstances),{childResults:u,sendValidationResultsToParent:l,removeValidationResultsFromParent:d}}function Ge(e){return new Proxy(e,{get(n,a){return typeof n[a]=="object"?Ge(n[a]):_(()=>n[a])}})}let je=0;function Ut(e,n){var a;let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(t=e,e=void 0,n=void 0);let{$registerAs:o,$scope:u=ie.COLLECT_ALL,$stopPropagation:p,$externalResults:c,currentVueInstance:l}=t;const d=l||((a=tt())===null||a===void 0?void 0:a.proxy),m=d?d.$options:{};o||(je+=1,o=`_vuelidate_${je}`);const v=C({}),b=new Bt,{childResults:y,sendValidationResultsToParent:r,removeValidationResultsFromParent:h}=d?Mt({$scope:u,instance:d}):{childResults:C({})};if(!e&&m.validations){const f=m.validations;n=C({}),at(()=>{n.value=d,M(()=>le(f)?f.call(n.value,new Ge(n.value)):f,w=>{v.value=ye({validations:w,state:n,childResults:y,resultsCache:b,globalConfig:t,instance:d,externalResults:c||d.vuelidateExternalResults})},{immediate:!0})}),t=m.validationsConfig||t}else{const f=ge(e)||St(e)?e:we(e||{});M(f,w=>{v.value=ye({validations:w,state:n,childResults:y,resultsCache:b,globalConfig:t,instance:d??{},externalResults:c})},{immediate:!0})}return d&&(r.forEach(f=>f(v,{$registerAs:o,$scope:u,$stopPropagation:p})),nt(()=>h.forEach(f=>f(o)))),_(()=>B(B({},i(v.value)),y.value))}const ue=e=>{if(e=i(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let n in e)return!0;return!1}return!!String(e).length},He=e=>(e=i(e),Array.isArray(e)?e.length:typeof e=="object"?Object.keys(e).length:String(e).length);function H(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t=>(t=i(t),!ue(t)||n.every(o=>(o.lastIndex=0,o.test(t))))}H(/^[a-zA-Z]*$/);H(/^[a-zA-Z0-9]*$/);H(/^\d*(\.\d+)?$/);const Wt=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var Ft=H(Wt),Gt={$validator:Ft,$message:"Value is not a valid email address",$params:{type:"email"}};function Ht(e){return n=>!ue(n)||He(n)<=i(e)}function Yt(e){return{$validator:Ht(e),$message:n=>{let{$params:a}=n;return`The maximum length allowed is ${a.max}`},$params:{max:e,type:"maxLength"}}}function Zt(e){return n=>!ue(n)||He(n)>=i(e)}function qe(e){return{$validator:Zt(e),$message:n=>{let{$params:a}=n;return`This field should be at least ${a.min} characters long`},$params:{min:e,type:"minLength"}}}function Qt(e){return typeof e=="string"&&(e=e.trim()),ue(e)}var ze={$validator:Qt,$message:"Value is required",$params:{type:"required"}};const Jt=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;H(Jt);H(/(^[0-9]*$)|(^-[0-9]+$)/);H(/^[-]?\d*(\.\d+)?$/);function Kt(e,n){const{t:a}=_e(),t=C(!0);function o(l){const d=["00000000","11111111"];if(!/^\d{8}$/.test(l)||d.includes(l))return!1;const m=[1,2,1,2,1,2,4,1];let v=0;for(let b=0;b<m.length;b++){const r=parseInt(l[b],10)*m[b];v+=Math.floor(r/10)+r%10}return v%10===0||l[6]==="7"&&(v+1)%5===0}const u={userName:{required:ze},email:{required:ze,email:Gt},phone:{required:l=>!l||l.length===9,numeric:l=>!l||/^\d+$/.test(l)},companyId:{required:l=>n.value==="three-step"?!!l:!0,validTaxId:l=>!l||o(l),minLength:qe(8)},cloudCarrier:{minLength:qe(8),maxLength:Yt(8),startsWithSlash:l=>l?l.startsWith("/"):!0},companyName:{},acceptTerms:{required:l=>l===!0}},p=Ut(u,e),c={userName:_(()=>p.value.userName.required.$response?"":a("required")),email:_(()=>p.value.email.required.$response?p.value.email.email.$response?"":a("pleaseEnterValidEmail"):a("required")),phone:_(()=>p.value.phone.numeric.$response?p.value.phone.required.$response?"":a("invalidPhoneNumber"):a("mobileNumberCanOnlyContainDigits")),cloudCarrier:_(()=>p.value.cloudCarrier.minLength.$response?p.value.cloudCarrier.maxLength.$response?p.value.cloudCarrier.startsWithSlash.$response?"":`${a("firstCharacterMustBe")} /`:a("upTo8CharactersAllowed"):a("atLeast8CharactersRequired")),companyId:_(()=>p.value.companyId.required.$response?p.value.companyId.minLength.$response?p.value.companyId.validTaxId.$response?"":a("invalidTaxId"):a("atLeast8CharactersRequired"):a("required")),companyName:_(()=>""),acceptTerms:_(()=>p.value.acceptTerms.required.$response?"":a("required"))};return M(()=>p.value.$invalid,l=>{t.value=l}),{v$:p,isDisabled:t,errorMessages:c}}function Xt(){const e=C({}),n=(t,o)=>{const u=t.getContext("2d");if(!u)return;const p=new Image;p.crossOrigin="Anonymous",p.onload=()=>{u.drawImage(p,0,0,t.width,t.height);const c="僅供平臺使用",l=12,d='"Noto Sans"',m="500",v="rgba(0, 0, 0, 0.5)";u.font=`${m} ${l}px ${d}`,u.fillStyle=v,u.textAlign="center",u.textBaseline="middle";const b=20.951*(Math.PI/180);u.save(),u.translate(t.width/2,t.height/2),u.rotate(b),u.translate(-t.width/2,-t.height/2);const y=u.measureText(c).width,r=.3,h=15,f=25;for(let w=-t.height;w<t.height*2;w+=r+f)for(let q=-t.width;q<t.width*2;q+=y+h){const U=w/(r+f)%2===0?0:h/2;u.fillText(c,q+U,w)}u.restore()},p.src=o};return{canvasRefs:e,applyWatermarks:t=>{$e(()=>{Object.keys(e.value).forEach(o=>{const u=e.value[o];u&&t[o]&&n(u,t[o])})})}}}const ea={class:"form"},ta={class:"title-block"},aa={class:"title"},na={key:0,class:"card"},ra={class:"card-content"},oa={class:"card-title"},sa={class:"form-block"},ia={class:"block-content"},la={class:"form-title"},ua={class:"form-title-text"},ca={class:"back-to-upload-btn"},da={class:"image-preview-block"},va={class:"image-preview-img"},pa={class:"input-wrapper"},fa={for:"name-input",class:"input-label"},ma={key:0,class:"error-message"},ha={class:"input-container"},ga=["readonly"],$a={class:"input-wrapper"},ya={for:"date-input",class:"input-label"},ba={class:"input-container"},_a={class:"block-content"},wa={class:"form-title"},Ca={class:"form-title-text"},ka={class:"input-wrapper"},xa={for:"email-input",class:"input-label"},Ra={key:0,class:"error-message"},Ia={class:"input-container"},Pa=["placeholder"],Ea={class:"input-wrapper"},Oa={for:"name-input",class:"input-label"},Ta={key:0,class:"error-message"},Sa={key:1,class:"error-message phone-sub"},Na={class:"input-container phone-input"},Va=["placeholder"],Da={class:"form-title"},La={class:"form-title-text"},Aa={class:"form-title-sub"},ja={class:"radio-group"},qa={class:"radio-label"},za={class:"label-text"},Ba={class:"radio-label"},Ma={class:"label-text"},Ua={key:0,class:"error-message"},Wa={key:1,class:"error-message"},Fa={key:0},Ga={class:"input-container"},Ha=["placeholder"],Ya={key:1},Za={class:"input-container"},Qa=["placeholder"],Ja={class:"input-container invoice-co-name"},Ka={key:0,class:"error-message"},Xa=["placeholder"],en={class:"custom-checkbox"},tn={key:0,class:"error-message"},an={key:2,class:"loading-animation"},ln=Me({__name:"CheckInForm",setup(e){const n=vt(),a=st(),t=it(),o=$t(),{t:u}=_e(),p=C(!1),c=C("two-step"),l=C(""),d=C(""),m=C(""),v=C(""),b=C(null),y=C(null),r=C(null),h=C(""),f=C(""),w=C(!1),q=C(!0),U=C(!1),O=C(!1),te={userName:l,email:m,phone:v,cloudCarrier:b,companyId:y,companyName:r,acceptTerms:w},{v$:P,isDisabled:ce,errorMessages:N}=Kt(te,c),{canvasRefs:ae,applyWatermarks:Y}=Xt(),{showError:W,errorTitle:J,errorContent:de,errorButtonText:ve,errorClass:ne,showExtraButton:re,currentErrorType:pe,setMemberDataErrorCodeMap:fe,updateErrorMessages:K}=mt(),R=_(()=>a.idImages[Object.keys(a.idImages)[0]]);M([R,ae],()=>{Y(R.value)}),M(c,g=>{g==="two-step"?(y.value="",r.value=""):g==="three-step"&&(b.value="")});const L=()=>{v.value&&v.value[0]==="0"&&(v.value=v.value.slice(1))};lt(()=>{const g=T=>{var k,X,ee;l.value=T.name,d.value=T.birthday,v.value=T.phone||"",m.value=T.email||"",b.value=((k=T.invoice)==null?void 0:k.barcode)||"",y.value=((X=T.invoice)==null?void 0:X.compiled)||"",r.value=((ee=T.invoice)==null?void 0:ee.company)||""};o.defaultMemberData.code==="0"?g(o.defaultMemberData.data):g(a.idOcrResult.data);const{pms:$,order_number:z}=t.orderData.orderData;h.value=$,f.value=z,L(),Y(R.value)});const V=C(null),Ce=C(!0),ke=C(!1),Ye=()=>{var g;Ce.value=!1,l.value="",ke.value=!0,(g=V.value)==null||g.focus()},F=C(!1),xe=()=>{F.value=!F.value,F.value||Y(R.value)},Ze=()=>{w.value?(U.value=!0,O.value=!1):U.value&&(O.value=!0)},Qe=()=>{Xe()},Je=g=>{(g===Z.UploadFailed||g===Z.SaveDataNotification)&&(re.value=!1,Ie()),g===Z.HasQRNotification&&n.push("/checkin"),g===Z.NoOcrImage&&n.push("/upload"),W.value=!1},Ke=()=>{W.value=!1,q.value=!1,Ie()},Re=()=>{F.value?(F.value=!1,Y(R.value)):n.push("/upload")},Ie=async()=>{let g=v.value.length===9?String(v.value).padStart(10,"0"):v.value;const $={source:h.value,country_codes:"+886",phone:g,name:l.value,email:m.value,birthday:d.value,barcode:b.value,compiled:y.value,company:r.value,order_number:f.value,is_default:q.value};p.value=!0;let z=!1;try{const T=await ft($),k=fe[T.code];T.code!=="0"&&K(k),T.code==="0"&&(z=!0,o.setSendableEmail(l.value,m.value))}catch{K(Z.UnknownError)}finally{p.value=!1,z&&n.push("/checkin")}},Xe=async()=>{K(Z.SaveDataNotification,void 0,l.value,m.value)};return(g,$)=>{const z=Oe("SvgIcon"),T=Oe("router-link");return I(),E(Te,null,[j(pt),s("main",ea,[s("div",ta,[j(se,{buttonClass:"",onClick:Re,class:"back-route"},{default:Q(()=>[j(z,{name:"back",class:"back-icon"}),s("span",null,x(g.$t("return")),1)]),_:1}),s("div",aa,[s("p",null,x(g.$t("preCheckIn")),1)])]),F.value?S("",!0):(I(),E("div",na,[s("div",ra,[s("p",oa,x(g.$t("fillInInformation")),1),s("div",sa,[s("div",ia,[s("div",la,[s("p",ua,x(g.$t("personalIdentificationInformation")),1),j(T,{to:"/upload",class:"no-underline"},{default:Q(()=>[s("button",ca,x(g.$t("reUpload")),1)]),_:1})]),s("div",da,[(I(!0),E(Te,null,ut(R.value,(k,X)=>(I(),E("div",{key:X,class:"image-preview-container"},[s("div",va,[s("canvas",{ref_for:!0,ref:ee=>{ee&&(i(ae)[X]=ee)},width:"254",height:"150"},null,512)])]))),128))]),s("div",pa,[s("div",null,[s("label",fa,x(g.$t("name")),1),i(P).userName.$error?(I(),E("label",ma,x(i(N).userName),1)):S("",!0)]),s("div",ha,[A(s("input",{type:"text",id:"name-input",ref_key:"userNameInput",ref:V,"onUpdate:modelValue":$[0]||($[0]=k=>l.value=k),class:D(["input-field",{"error-border":i(P).userName.$error}]),readonly:Ce.value,onBlur:$[1]||($[1]=k=>i(P).userName.$touch())},null,42,ga),[[G,l.value]]),ke.value?S("",!0):(I(),E("button",{key:0,onClick:Ye,class:"clear-button",type:"button"},[j(z,{name:"close",class:"clear-icon"})]))])]),s("div",$a,[s("label",ya,x(g.$t("dateOfBirth")),1),s("div",ba,[A(s("input",{type:"text",id:"date-input",ref:"dateInput","onUpdate:modelValue":$[2]||($[2]=k=>d.value=k),class:"input-field date",readonly:""},null,512),[[G,d.value]])])])]),s("div",_a,[s("div",wa,[s("p",Ca,x(g.$t("contactInformation")),1)]),s("div",ka,[s("div",null,[s("label",xa,x(g.$t("emailAddress")),1),i(P).email.$error?(I(),E("label",Ra,x(i(N).email),1)):S("",!0)]),s("div",Ia,[A(s("input",{type:"text",id:"email-input","onUpdate:modelValue":$[3]||($[3]=k=>m.value=k),class:D(["input-field",{"error-border":i(P).email.$error}]),placeholder:g.$t("enterEmailAddress"),onBlur:$[4]||($[4]=k=>i(P).email.$touch())},null,42,Pa),[[G,m.value]])])]),s("div",Ea,[s("div",null,[s("label",Oa,x(g.$t("mobileNumber")),1),i(P).phone.$error?(I(),E("label",Ta,x(i(N).phone),1)):(I(),E("label",Sa,x(g.$t("validationPhoneNumberTaiwanOnly")),1))]),s("div",Na,[s("div",{class:D([{"error-border":i(P).phone.$error},"input-field country-code"])},$[16]||($[16]=[s("span",null,"+886",-1),s("span",null,"|",-1)]),2),A(s("input",{type:"tel",id:"phone-input","onUpdate:modelValue":$[5]||($[5]=k=>v.value=k),class:D(["input-field phone-input",{"error-border":i(P).phone.$error}]),placeholder:g.$t("enterMobileNumber"),onBlur:$[6]||($[6]=k=>i(P).phone.$touch()),onInput:L},null,42,Va),[[G,v.value]])])])]),s("div",null,[s("div",Da,[s("p",La,x(g.$t("invoiceFormat")),1),s("p",Aa,x(g.$t("thisStoreUsesPaperInvoices")),1)]),s("div",ja,[s("label",qa,[A(s("input",{type:"radio",name:"invoice-type",value:"two-step","onUpdate:modelValue":$[7]||($[7]=k=>c.value=k)},null,512),[[Se,c.value]]),$[17]||($[17]=s("span",{class:"radio-custom"},null,-1)),s("span",za,x(g.$t("twoPartPersonalInvoice")),1)]),s("label",Ba,[A(s("input",{type:"radio",name:"invoice-type",value:"three-step","onUpdate:modelValue":$[8]||($[8]=k=>c.value=k)},null,512),[[Se,c.value]]),$[18]||($[18]=s("span",{class:"radio-custom"},null,-1)),s("span",Ma,x(g.$t("threePartPersonalInvoice")),1)]),i(P).cloudCarrier.$error?(I(),E("p",Ua,x(i(N).cloudCarrier),1)):S("",!0),i(P).companyId.$error?(I(),E("p",Wa,x(i(N).companyId),1)):S("",!0)]),c.value==="two-step"?(I(),E("div",Fa,[s("div",Ga,[A(s("input",{type:"text",id:"cloud-carrier-input","onUpdate:modelValue":$[9]||($[9]=k=>b.value=k),class:D(["input-field",{"error-border":i(P).cloudCarrier.$error}]),placeholder:g.$t("enterCloudCarrierOptional"),onBlur:$[10]||($[10]=k=>i(P).cloudCarrier.$touch())},null,42,Ha),[[G,b.value]])])])):S("",!0),c.value==="three-step"?(I(),E("div",Ya,[s("div",Za,[A(s("input",{type:"text",id:"company-id-input","onUpdate:modelValue":$[11]||($[11]=k=>y.value=k),class:D(["input-field",{"error-border":i(P).companyId.$error}]),placeholder:g.$t("enterCompanyTaxId"),onBlur:$[12]||($[12]=k=>i(P).companyId.$touch())},null,42,Qa),[[G,y.value]])]),s("div",Ja,[i(P).companyName.$error?(I(),E("p",Ka,x(i(N).companyName),1)):S("",!0),A(s("input",{type:"text",id:"company-name-input","onUpdate:modelValue":$[13]||($[13]=k=>r.value=k),class:D(["input-field",{"error-border":i(P).companyName.$error}]),placeholder:g.$t("enterCompanyNameOptional")},null,10,Xa),[[G,r.value]])])])):S("",!0)])]),s("div",en,[A(s("input",{type:"checkbox",id:"checkbox",class:"checkbox-input","onUpdate:modelValue":$[14]||($[14]=k=>w.value=k),onChange:Ze},null,544),[[ct,w.value]]),s("label",{for:"checkbox",class:D({"error-checkbox":O.value})},[w.value?(I(),oe(z,{key:0,name:"check",class:"check-icon"})):S("",!0)],2),s("div",null,[s("span",{class:D(["label-text",{"error-label":O.value}])},x(g.$t("iAgreeToTerms")),3),s("button",{type:"button",class:D(["link-button",{"error-label":O.value}]),onClick:xe},x(g.$t("privacyPolicy")),3)]),O.value?(I(),E("span",tn,x(i(N).acceptTerms),1)):S("",!0)]),j(se,{buttonClass:"btn primary-btn",disabled:i(ce),onClick:Qe},{default:Q(()=>[he(x(g.$t("submit")),1)]),_:1},8,["disabled"])])])),F.value?(I(),oe(Ot,{key:1,onClose:xe,class:"privacyPolicy"})):S("",!0),p.value?(I(),E("div",an,[j(ht,{name:"upload",lottie_text:g.$t("uploadingData")},null,8,["lottie_text"])])):S("",!0)]),i(W)?(I(),oe(gt,{key:0,title:i(J),content:i(de),buttonText:i(ve),class:D(i(ne)),onButtonClick:$[15]||($[15]=k=>Je(i(pe)))},dt({_:2},[i(re)?{name:"extra-button",fn:Q(()=>[s("div",{class:"no-underline back-edit",onClick:Re},[j(z,{name:"back",class:"back-icon"}),s("span",null,x(g.$t("returnToEdit")),1)]),j(se,{buttonClass:"btn secondary-btn pass-btn",onClick:Ke},{default:Q(()=>[he(x(g.$t("skipAndDoNotAccess")),1)]),_:1})]),key:"0"}:void 0]),1032,["title","content","buttonText","class"])):S("",!0)],64)}}});export{ln as default};
