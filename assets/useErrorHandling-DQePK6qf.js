import{d as D,r as i,c as m,s as x,T as C,i as g,f as c,t as h,F as M,n as N,Q as w,R as T,p as U,h as R,k as v,_ as F,o as I,y as L,e as B,g as O,V as $,S as f,x as V}from"./index-BXZVqfau.js";const y={key:0,class:"error-alert-overlay"},P={class:"alert-text"},S={class:"alert-title"},j={class:"alert-content"},z={key:0},q={class:"alert-footer"},H={class:"btn-group"},Q=D({__name:"ErrorAlert",props:{title:{default:""},content:{},buttonText:{default:""},subText:{default:""},extraButton:{type:Boolean},errorClass:{default:""}},emits:["close","buttonClick","subTextClick"],setup(e,{emit:n}){const a=n,t=i(!0),s=()=>{a("buttonClick"),d()},r=()=>{a("subTextClick"),d()},d=()=>{t.value=!1,a("close")};return(o,l)=>(v(),m("div",null,[(v(),x(C,{to:"body"},[t.value?(v(),m("div",y,[c("div",T({class:["error-alert",o.errorClass]},o.$attrs),[c("div",P,[c("p",S,h(o.title),1),c("div",j,[(v(!0),m(M,null,N(o.content,(u,_)=>(v(),m("div",{key:_,class:U(u.class)},[R(h(u.text)+" ",1),_<o.content.length-1?(v(),m("br",z)):g("",!0)],2))),128))])]),c("div",q,[c("div",H,[w(o.$slots,"extra-button"),c("button",{class:"alert-button",onClick:s},h(o.buttonText),1)]),o.subText?(v(),m("div",{key:0,class:"alert-subtext",onClick:r},h(o.subText),1)):g("",!0)])],16)])):g("",!0)]))]))}}),ee=F(Q,[["__scopeId","data-v-757a4219"]]),G=(e,n,a)=>{const t=e[n];return t?typeof t=="function"?t():Promise.resolve(t):new Promise((s,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==a?". Note that variables only represent file names one level deep.":""))))})},W={class:"lottie-alert-overlay"},J={class:"lottie-animation"},K={class:"lottie-text"},te=D({__name:"Lottie",props:{name:{type:String,required:!0},lottie_text:{type:String,default:""}},setup(e){const n=i(null),a=e,t=window.matchMedia("(prefers-color-scheme: dark)"),s=localStorage.getItem("theme"),r=s==="dark"||s===null&&t.matches,d=l=>r?`${l}_dark`:`${l}_light`,o=async l=>{if(l)try{const u=d(l),{default:_}=await G(Object.assign({"../assets/lottie/id_ocr_dark.json":()=>f(()=>import("./id_ocr_dark-BzYVGNbj.js"),[]),"../assets/lottie/id_ocr_light.json":()=>f(()=>import("./id_ocr_light-C8OZODEi.js"),[]),"../assets/lottie/loading.json":()=>f(()=>import("./loading-TH2bvs_J.js"),[]),"../assets/lottie/upload_dark.json":()=>f(()=>import("./upload_dark-D27coe8Z.js"),[]),"../assets/lottie/upload_light.json":()=>f(()=>import("./upload_light-Beztf58R.js"),[])}),`../assets/lottie/${u}.json`,4);n.value=_}catch(u){console.error("Lottie JSON 文件加載失敗",u)}};return I(()=>{o(a.name)}),L(()=>a.name,l=>{o(l)}),t.addEventListener("change",l=>{l.matches!==r&&o(a.name)}),(l,u)=>(v(),x(C,{to:"body"},[c("div",W,[c("div",J,[B(O($),{animationData:n.value,loop:!0,autoplay:!0,class:"lottie"},null,8,["animationData"]),c("p",K,h(e.lottie_text),1)])])]))}});var Z=(e=>(e[e.RecognitionFailed=0]="RecognitionFailed",e[e.MinorAccessDenied=1]="MinorAccessDenied",e[e.UnknownError=2]="UnknownError",e[e.UploadFailed=3]="UploadFailed",e[e.SaveDataNotification=4]="SaveDataNotification",e[e.HasQRNotification=5]="HasQRNotification",e[e.NoOcrImage=6]="NoOcrImage",e[e.RecognitionMismatch=7]="RecognitionMismatch",e))(Z||{});function ae(){const{t:e}=V(),n=i(!1),a=i(""),t=i([]),s=i(""),r=i(""),d=i(""),o=i(!1),l=i(null);return{showError:n,errorTitle:a,errorContent:t,errorSubText:d,errorButtonText:s,errorClass:r,showExtraButton:o,currentErrorType:l,setMemberDataErrorCodeMap:{1e3:3,1001:5,1002:3,1003:6,5003:3,5004:3},ocrErrorCodeMap:{1e3:1,1001:1,1002:0,1003:0,1004:7,1005:0,5003:0,5004:0},updateErrorMessages:(b,k,A="",E="")=>{r.value="",d.value="",o.value=!1,l.value=b;let p="";switch(k==="BACK"?p=e("uploadLabel.idBack"):k==="DOCUMENT"?p=e("uploadLabel.idFront"):k==="UNRECOGNIZED_DOCUMENT"&&(p=e("unrecognizedDocument")),b){case 0:a.value=e("identificationFailed"),t.value=[{text:e("documentImageCannotBeRecognized")},{text:e("pleaseReselect")}],s.value=e("reUpload");break;case 7:a.value=e("invalidDocumentFormat"),t.value=[...p?[{text:p}]:[],{text:e("imageFormatDoesNotMatch")},{text:e("reUpload")}],s.value=e("reUpload");break;case 1:a.value=e("minorBlocked"),t.value=[{text:e("identifiedAsUnder18")},{text:e("onlineRegistrationNotAvailable")},{text:e("pleaseCheckInWithGuardian")}],s.value=e("iUnderstand"),d.value=e("iAmOfLegalAgeTryAgain"),r.value="purple";break;case 3:a.value=e("dataUploadFailed"),t.value=[{text:e("networkCheckMessage")},{text:e("tryAgain"),class:"mt-20"}],s.value=e("reUpload");break;case 5:a.value=e("dataUploadFailed"),t.value=[{text:e("qrcodeAlreadyClaimed")}],s.value=e("navigateToQrcodePage");break;case 6:a.value=e("dataUploadFailed"),t.value=[{text:e("pleaseCompleteDocumentVerificationFirst")}],s.value=e("returnToDocumentUpload");break;case 4:a.value=e("fetchDefaultData"),t.value=[{text:`${e("setThisDataAs")} ${A} ${e("default")}`},{text:`${E}`,class:"fz-20 mt-20"},{text:e("futureBookingsWithThisEmail"),class:"fz-20 fc-p mt-20"}],o.value=!0,s.value=e("saveAsDefault"),r.value="purple extra";break;default:a.value=e("unknownError"),t.value=[{text:e("unknownErrorOccurred")},{text:e("pleaseTryAgainLater")}],s.value=e("close");break}n.value=!0}}}export{ee as E,te as _,Z as a,ae as u};
