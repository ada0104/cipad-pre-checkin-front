import{d as B,r as l,u as E,a as F,b as H,o as R,c as i,e as c,f as a,t as r,g as p,V as T,h as n,i as q,w,F as A,j as P,k as d}from"./index-C1EeuRVQ.js";import N from"./loading-TH2bvs_J.js";import{H as j,B as V,g as z,a as G}from"./Button-DZxHFyMh.js";import{u as Y}from"./member-6y7xb5HH.js";const J={class:"home"},K={class:"title-block"},Q={class:"title"},W={class:"card-block"},X={key:0,class:"card card-2"},Z={class:"error-title"},x={class:"error-text"},ee={class:"error-text"},te={key:1,class:"loading"},ae={class:"card card-1"},re={class:"card card-2"},oe={key:2,class:"card card-2"},se={class:"error-title"},ne={class:"error-text"},le={key:3},ie={class:"card card-1"},de={class:"card-title m-b-16"},ce={class:"card-sec-title"},ue={key:0,class:"card-text"},me={class:"card card-2"},pe={class:"card-title"},De={class:"card-title m-b-48"},ve={class:"btn-group"},ye=B({__name:"HomeView",setup(he){const _=l(""),b=l(""),k=l(""),y=l(""),g=l(""),D=l(!1),u=l(!1),v=l(!1),m=E(),S=F(),O=H(),$=Y(),h=P(),L={url_token:S.urlToken},M=()=>{const{pms:t,email:e,order_number:o}=m.orderData.orderData;return{pms:t,email:e,order_number:o}},C=async t=>{if(!t)return $.clearStore(),O.clearStore(),h.push("/upload");try{const e=await z(M());e.code==="0"&&e.data&&$.setMemberData(e)}catch(e){console.error("getMemberData error:",e)}h.push("/upload")},I=t=>{const{orderData:e}=t;if(_.value=e.order_number,b.value=e.name,k.value=e.domain,!u.value&&t.orderDetailData){const[o]=t.orderDetailData.data;y.value=o.check_in,g.value=o.check_out}},U=async()=>{var t,e,o;D.value=!0;try{const s=await G(L),f=(t=s.orderData)==null?void 0:t.code;f==="0"&&((e=s.orderDetailData)==null?void 0:e.code)==="0"?(I(s),m.setOrderData(s)):f==="1001"&&((o=s.orderDetailData)==null?void 0:o.code)==="0"?(m.setOrderData(s),h.push("/checkin")):f==="1000"?v.value=!0:(u.value=!0,I(s))}catch(s){console.error("Error fetching data:",s)}finally{D.value=!1}};return R(async()=>{if(S.urlToken===""){v.value=!0;return}m.clearStore(),await U()}),(t,e)=>(d(),i(A,null,[c(j),a("main",J,[a("div",K,[a("div",Q,[a("p",null,r(t.$t("checkInInfo")),1)])]),a("div",W,[v.value?(d(),i("div",X,[a("p",Z,r(t.$t("incorrectUrl")),1),a("p",x,r(t.$t("orderUrlIncomplete")),1),a("p",ee,r(t.$t("returnToEmailUseCorrectLink")),1)])):D.value?(d(),i("div",te,[a("div",ae,[c(p(T),{animationData:p(N),loop:!0,autoplay:!0,class:"lottie"},null,8,["animationData"])]),a("div",re,[c(p(T),{animationData:p(N),loop:!0,autoplay:!0,class:"lottie"},null,8,["animationData"])])])):u.value?(d(),i("div",oe,[a("p",se,r(t.$t("preCheckInAccessClosed")),1),a("p",ne,[n(r(t.$t("dueToChangesInYourOrder")),1),e[2]||(e[2]=a("br",null,null,-1)),n(" "+r(t.$t("preCheckInServiceTemporarilyUnavailable")),1),e[3]||(e[3]=a("br",null,null,-1)),n(" "+r(t.$t("pleaseCheckInAtTheHotel")),1),e[4]||(e[4]=a("br",null,null,-1)),e[5]||(e[5]=a("br",null,null,-1)),n(" "+r(t.$t("apologizeForTheInconvenience")),1)])])):(d(),i("div",le,[a("div",ie,[a("p",de,r(k.value),1),a("p",ce,r(t.$t("orderNumber"))+" "+r(_.value),1),u.value?q("",!0):(d(),i("p",ue,[e[6]||(e[6]=n(" ( ")),a("span",null,r(new Date(y.value).toLocaleDateString()),1),e[7]||(e[7]=n(" - ")),a("span",null,r(new Date(g.value).toLocaleDateString()),1),e[8]||(e[8]=n(" ) "))]))]),a("div",me,[a("p",pe,r(t.$t("buyer"))+" - "+r(b.value),1),a("p",De,r(t.$t("isThisGuestForThisStay")),1),a("div",ve,[c(V,{buttonClass:"btn secondary-btn",onClick:e[0]||(e[0]=o=>C(!1))},{default:w(()=>[n(r(t.$t("noDifferentPerson")),1)]),_:1}),c(V,{buttonClass:"btn primary-btn",onClick:e[1]||(e[1]=o=>C(!0))},{default:w(()=>[n(r(t.$t("yesSamePerson")),1)]),_:1})])])]))])])],64))}});export{ye as default};
